Solidus Legacy Return Authorizations
====================================

This is an extension for users migrating from legacy versions of Spree (2.3.x
and prior) which had a different representation of and handling for return
authorizations.

When upgrading from a prior version of Spree to Solidus, simply include this
extension in your application's Gemfile and your old data will be preserved in
separate tables (e.g., `spree_legacy_return_authorizations`) and columns (e.g.
`spree_inventory_units.legacy_return_authorization_id`).

This extension maintains the legacy admin interfaces for viewing and closing
out (receiving/canceling) any existing legacy return authorizations. It does
not allow creating any new legacy return authorizations.  New return
authorizations should be handled through the new returns system included in
Solidus.

If an order has existing legacy return authorizations then an additional admin
menu item "Legacy Return Authorizations" will appear in the admin interface for
that order (/admin/orders/XXX/edit).

Installation
------------

Add solidus_legacy_return_authorizations to your Gemfile:

```ruby
gem "solidus_legacy_return_authorizations"
```

Bundle your dependencies and run the installation generator:

```shell
bundle
bundle exec rails g solidus_legacy_return_authorizations:install
```

Authorization
-------------

For discrete authorization, two permission sets have been added to allow for granular display in the admin.

`Spree::PermissionSets::LegacyReturnAuthorizationDisplay` and `Spree::PermissionSets::LegacyReturnAuthorizationManagement` have been added and can be assigned via [RoleConfiguration](http://docs.solidus.io/Spree/RoleConfiguration.html)


Testing
-------

First bundle your dependencies, then run `rake`. `rake` will default to building the dummy app if it does not exist, then it will run specs. The dummy app can be regenerated by using `rake test_app`.

```shell
bundle
bundle exec rake
```

When testing your applications integration with this extension you may use it's factories.
Simply add this require statement to your spec_helper:

```ruby
require 'spree_legacy_return_authorizations/factories'
```
